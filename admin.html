<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CheckReel Admin Dashboard</title>
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#667eea">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
            line-height: 1.6;
        }

        /* RTL Support */
        [dir="rtl"] {
            direction: rtl;
            text-align: right;
        }

        /* Header */
        .header {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .logo-section {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .logo {
            font-size: 2rem;
            font-weight: bold;
            color: white;
        }

        .header-controls {
            display: flex;
            align-items: center;
            gap: 1rem;
            flex-wrap: wrap;
        }

        .language-selector, .pwa-install {
            background: rgba(255, 255, 255, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .language-selector:hover, .pwa-install:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
        }

        /* Main Layout */
        .main-container {
            display: grid;
            grid-template-columns: 1fr 320px;
            gap: 2rem;
            padding: 2rem;
            max-width: 1400px;
            margin: 0 auto;
        }

        .dashboard-content {
            display: flex;
            flex-direction: column;
            gap: 2rem;
        }

        /* Stats Grid */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1.5rem;
        }

        .kpi-card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 16px;
            padding: 1.5rem;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .kpi-card:hover {
            transform: translateY(-5px);
            background: rgba(255, 255, 255, 0.15);
        }

        .kpi-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .kpi-title {
            color: rgba(255, 255, 255, 0.8);
            font-size: 0.9rem;
            font-weight: 500;
        }

        .kpi-icon {
            font-size: 1.5rem;
        }

        .kpi-value {
            font-size: 2rem;
            font-weight: bold;
            color: white;
            margin-bottom: 0.5rem;
        }

        .kpi-change {
            font-size: 0.85rem;
            font-weight: 500;
        }

        .kpi-change.positive {
            color: #4ade80;
        }

        .kpi-change.negative {
            color: #f87171;
        }

        /* Revenue Analytics */
        .revenue-analytics {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 16px;
            padding: 2rem;
        }

        .analytics-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .analytics-title {
            font-size: 1.5rem;
            font-weight: bold;
            color: white;
        }

        .analytics-tabs {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
        }

        .tab-button {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: rgba(255, 255, 255, 0.8);
            padding: 0.5rem 1rem;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9rem;
        }

        .tab-button.active, .tab-button:hover {
            background: rgba(255, 255, 255, 0.2);
            color: white;
        }

        .analytics-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
        }

        .analytics-section {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            padding: 1.5rem;
        }

        .section-title {
            font-size: 1.1rem;
            font-weight: 600;
            color: white;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .tier-item, .action-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.75rem 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .tier-item:last-child, .action-item:last-child {
            border-bottom: none;
        }

        .tier-info, .action-info {
            display: flex;
            flex-direction: column;
            gap: 0.25rem;
        }

        .tier-name, .action-title {
            color: white;
            font-weight: 500;
        }

        .tier-details, .action-details {
            color: rgba(255, 255, 255, 0.7);
            font-size: 0.85rem;
        }

        .tier-stats, .action-impact {
            text-align: right;
            color: rgba(255, 255, 255, 0.9);
            font-weight: 500;
        }

        /* Chart Container */
        .chart-container {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 16px;
            padding: 2rem;
            margin-top: 2rem;
        }

        .chart-title {
            font-size: 1.2rem;
            font-weight: 600;
            color: white;
            margin-bottom: 1.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        #revenueChart {
            max-height: 400px;
        }

        /* Sidebar */
        .sidebar {
            display: flex;
            flex-direction: column;
            gap: 2rem;
        }

        .sidebar-section {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 16px;
            padding: 1.5rem;
        }

        .sidebar-title {
            font-size: 1.1rem;
            font-weight: 600;
            color: white;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .quick-action, .activity-item {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 0.75rem;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
            margin-bottom: 0.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .quick-action:hover, .activity-item:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateX(5px);
        }

        .action-icon, .activity-icon {
            font-size: 1.2rem;
        }

        .action-text, .activity-text {
            color: white;
            font-weight: 500;
        }

        .activity-details {
            display: flex;
            flex-direction: column;
        }

        .activity-time {
            color: rgba(255, 255, 255, 0.6);
            font-size: 0.8rem;
        }

        /* Modals */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(5px);
        }

        .modal-content {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            margin: 5% auto;
            padding: 0;
            border-radius: 16px;
            width: 90%;
            max-width: 800px;
            max-height: 80vh;
            overflow: hidden;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        }

        .modal-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 1.5rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-title {
            font-size: 1.3rem;
            font-weight: 600;
        }

        .close {
            color: white;
            font-size: 2rem;
            font-weight: bold;
            cursor: pointer;
            transition: opacity 0.3s ease;
        }

        .close:hover {
            opacity: 0.7;
        }

        .modal-body {
            padding: 2rem;
            max-height: 60vh;
            overflow-y: auto;
        }

        .modal-tabs {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
            border-bottom: 1px solid #eee;
        }

        .modal-tab {
            padding: 0.75rem 1.5rem;
            background: none;
            border: none;
            border-bottom: 2px solid transparent;
            cursor: pointer;
            font-weight: 500;
            color: #666;
            transition: all 0.3s ease;
        }

        .modal-tab.active {
            color: #667eea;
            border-bottom-color: #667eea;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .setting-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 0;
            border-bottom: 1px solid #eee;
        }

        .setting-item:last-child {
            border-bottom: none;
        }

        .setting-info h4 {
            margin-bottom: 0.25rem;
            color: #333;
        }

        .setting-info p {
            color: #666;
            font-size: 0.9rem;
        }

        .toggle-switch {
            position: relative;
            width: 50px;
            height: 24px;
            background: #ccc;
            border-radius: 12px;
            cursor: pointer;
            transition: background 0.3s ease;
        }

        .toggle-switch.active {
            background: #667eea;
        }

        .toggle-slider {
            position: absolute;
            top: 2px;
            left: 2px;
            width: 20px;
            height: 20px;
            background: white;
            border-radius: 50%;
            transition: transform 0.3s ease;
        }

        .toggle-switch.active .toggle-slider {
            transform: translateX(26px);
        }

        /* Responsive Design */
        @media (max-width: 1024px) {
            .main-container {
                grid-template-columns: 1fr;
            }
            
            .sidebar {
                order: -1;
            }
            
            .analytics-content {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 768px) {
            .header {
                padding: 1rem;
            }
            
            .main-container {
                padding: 1rem;
                gap: 1rem;
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
            }
            
            .modal-content {
                width: 95%;
                margin: 10% auto;
            }
            
            .modal-body {
                padding: 1rem;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="logo-section">
            <div class="logo">🎯 CheckReel Admin</div>
            <div id="pwaStatus" style="color: rgba(255,255,255,0.7); font-size: 0.9rem;"></div>
        </div>
        <div class="header-controls">
            <select id="languageSelector" class="language-selector">
                <option value="en">🇺🇸 English</option>
                <option value="ar">🇸🇦 العربية</option>
            </select>
            <button id="installPWA" class="pwa-install" style="display: none;">📱 Install App</button>
        </div>
    </header>

    <!-- Main Container -->
    <div class="main-container">
        <!-- Dashboard Content -->
        <div class="dashboard-content">
            <!-- KPI Stats Grid -->
            <div class="stats-grid">
                <div class="kpi-card" onclick="openModal('scanHistoryModal')">
                    <div class="kpi-header">
                        <h4 class="kpi-title" data-i18n="todayRevenue">Today's Revenue</h4>
                        <div class="kpi-icon">💰</div>
                    </div>
                    <div class="kpi-value">$847</div>
                    <div class="kpi-change positive">↗ +12.4%</div>
                </div>

                <div class="kpi-card" onclick="openModal('platformGuidelinesModal')">
                    <div class="kpi-header">
                        <h4 class="kpi-title" data-i18n="monthlyRevenue">Monthly Revenue</h4>
                        <div class="kpi-icon">📊</div>
                    </div>
                    <div class="kpi-value">$24,567</div>
                    <div class="kpi-change positive">↗ +18.2%</div>
                </div>

                <div class="kpi-card" onclick="openModal('settingsModal')">
                    <div class="kpi-header">
                        <h4 class="kpi-title" data-i18n="arpu">ARPU</h4>
                        <div class="kpi-icon">⚙️</div>
                    </div>
                    <div class="kpi-value">$8.64</div>
                    <div class="kpi-change positive">↗ +3.2%</div>
                </div>

                <div class="kpi-card" onclick="openModal('supportModal')">
                    <div class="kpi-header">
                        <h4 class="kpi-title" data-i18n="churnRate">Churn Rate</h4>
                        <div class="kpi-icon">💬</div>
                    </div>
                    <div class="kpi-value">4.2%</div>
                    <div class="kpi-change positive">↘ -0.8%</div>
                </div>
            </div>

            <!-- Revenue Analytics -->
            <div class="revenue-analytics">
                <div class="analytics-header">
                    <h2 class="analytics-title" data-i18n="revenueAnalytics">Revenue Analytics</h2>
                    <div class="analytics-tabs">
                        <button class="tab-button active" onclick="switchTab('overview')" data-i18n="overview">Overview</button>
                        <button class="tab-button" onclick="switchTab('trends')" data-i18n="trends">Trends</button>
                        <button class="tab-button" onclick="switchTab('forecast')" data-i18n="forecast">Forecast</button>
                    </div>
                </div>

                <div class="analytics-content">
                    <div class="analytics-section">
                        <h3 class="section-title">👥 <span data-i18n="userTiers">User Tiers</span></h3>
                        <div class="tier-item">
                            <div class="tier-info">
                                <div class="tier-name" data-i18n="freeTier">Free Tier</div>
                                <div class="tier-details">64.8% of users • 12.3% conversion</div>
                            </div>
                            <div class="tier-stats">1,847</div>
                        </div>
                        <div class="tier-item">
                            <div class="tier-info">
                                <div class="tier-name" data-i18n="plusTier">Plus Tier</div>
                                <div class="tier-details">25.8% of users • $3,670/month</div>
                            </div>
                            <div class="tier-stats">734</div>
                        </div>
                        <div class="tier-item">
                            <div class="tier-info">
                                <div class="tier-name" data-i18n="premiumTier">Premium Tier</div>
                                <div class="tier-details">9.4% of users • $2,658/month</div>
                            </div>
                            <div class="tier-stats">266</div>
                        </div>
                    </div>

                    <div class="analytics-section">
                        <h3 class="section-title">🚀 <span data-i18n="aiActions">AI-Powered Actions</span></h3>
                        <div class="action-item">
                            <div class="action-info">
                                <div class="action-title" data-i18n="revenueOptimization">Revenue Optimization</div>
                                <div class="action-details">Suggest 8% price increase</div>
                            </div>
                            <div class="action-impact">+$2,940</div>
                        </div>
                        <div class="action-item">
                            <div class="action-info">
                                <div class="action-title" data-i18n="churnPrevention">Churn Prevention</div>
                                <div class="action-details">Target 127 at-risk users</div>
                            </div>
                            <div class="action-impact">-15%</div>
                        </div>
                        <div class="action-item">
                            <div class="action-info">
                                <div class="action-title" data-i18n="upgradeOpportunities">Upgrade Opportunities</div>
                                <div class="action-details">89 power users identified</div>
                            </div>
                            <div class="action-impact">+$1,780</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Chart Container -->
            <div class="chart-container">
                <h3 class="chart-title">📈 <span data-i18n="usageAnalytics">6-Month Revenue Forecast</span></h3>
                <canvas id="revenueChart"></canvas>
            </div>
        </div>

        <!-- Sidebar -->
        <div class="sidebar">
            <!-- Quick Actions -->
            <div class="sidebar-section">
                <h3 class="sidebar-title">⚡ <span data-i18n="quickActions">Quick Actions</span></h3>
                <div class="quick-action" onclick="openModal('scanHistoryModal')">
                    <div class="action-icon">📊</div>
                    <div class="action-text" data-i18n="scanHistory">Scan History</div>
                </div>
                <div class="quick-action" onclick="openModal('platformGuidelinesModal')">
                    <div class="action-icon">📋</div>
                    <div class="action-text" data-i18n="platformGuidelines">Platform Guidelines</div>
                </div>
                <div class="quick-action" onclick="openModal('settingsModal')">
                    <div class="action-icon">⚙️</div>
                    <div class="action-text" data-i18n="settings">Settings</div>
                </div>
                <div class="quick-action" onclick="openModal('supportModal')">
                    <div class="action-icon">💬</div>
                    <div class="action-text" data-i18n="support">Support</div>
                </div>
            </div>

            <!-- Recent Activity -->
            <div class="sidebar-section">
                <h3 class="sidebar-title">🕒 <span data-i18n="recentActivity">Recent Activity</span></h3>
                <div class="activity-item">
                    <div class="activity-icon">👤</div>
                    <div class="activity-details">
                        <div class="activity-text">New Premium subscriber</div>
                        <div class="activity-time">2 minutes ago</div>
                    </div>
                </div>
                <div class="activity-item">
                    <div class="activity-icon">📱</div>
                    <div class="activity-details">
                        <div class="activity-text">TikTok scan completed</div>
                        <div class="activity-time">5 minutes ago</div>
                    </div>
                </div>
                <div class="activity-item">
                    <div class="activity-icon">⚠️</div>
                    <div class="activity-details">
                        <div class="activity-text">Violation detected</div>
                        <div class="activity-time">12 minutes ago</div>
                    </div>
                </div>
                <div class="activity-item">
                    <div class="activity-icon">💰</div>
                    <div class="activity-details">
                        <div class="activity-text">Payment received</div>
                        <div class="activity-time">1 hour ago</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modals -->
    <!-- Scan History Modal -->
    <div id="scanHistoryModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title" data-i18n="scanHistory">📊 Scan History</h2>
                <span class="close" onclick="closeModal('scanHistoryModal')">&times;</span>
            </div>
            <div class="modal-body">
                <div class="modal-tabs">
                    <button class="modal-tab active" onclick="switchModalTab('recent-scans')" data-i18n="recentScans">Recent Scans</button>
                    <button class="modal-tab" onclick="switchModalTab('analytics')" data-i18n="analytics">Analytics</button>
                    <button class="modal-tab" onclick="switchModalTab('export')" data-i18n="export">Export</button>
                </div>
                
                <div id="recent-scans" class="tab-content active">
                    <h3 data-i18n="recentScansTitle">Recent Content Scans</h3>
                    <p data-i18n="recentScansDesc">View and manage recent content scans across all platforms.</p>
                    <div style="margin-top: 1rem; padding: 1rem; background: #f8f9fa; border-radius: 8px;">
                        <strong>Latest Scans:</strong><br>
                        • TikTok video scan - 2 violations found<br>
                        • Instagram story scan - Clean content<br>
                        • YouTube video scan - Age-inappropriate content flagged
                    </div>
                </div>
                
                <div id="analytics" class="tab-content">
                    <h3 data-i18n="scanAnalyticsTitle">Scan Analytics</h3>
                    <p data-i18n="scanAnalyticsDesc">Detailed analytics and insights from content scanning.</p>
                    <div style="margin-top: 1rem; padding: 1rem; background: #f8f9fa; border-radius: 8px;">
                        <strong>This Month:</strong><br>
                        • Total scans: 12,847<br>
                        • Violations found: 1,234 (9.6%)<br>
                        • Most common: Inappropriate language
                    </div>
                </div>
                
                <div id="export" class="tab-content">
                    <h3 data-i18n="exportDataTitle">Export Data</h3>
                    <p data-i18n="exportDataDesc">Export scan history and analytics data.</p>
                    <div style="margin-top: 1rem;">
                        <button style="padding: 0.5rem 1rem; background: #667eea; color: white; border: none; border-radius: 4px; margin-right: 0.5rem;">Export CSV</button>
                        <button style="padding: 0.5rem 1rem; background: #764ba2; color: white; border: none; border-radius: 4px;">Export PDF</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Platform Guidelines Modal -->
    <div id="platformGuidelinesModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title" data-i18n="platformGuidelines">📋 Platform Guidelines</h2>
                <span class="close" onclick="closeModal('platformGuidelinesModal')">&times;</span>
            </div>
            <div class="modal-body">
                <div class="modal-tabs">
                    <button class="modal-tab active" onclick="switchModalTab('tiktok')" data-i18n="tiktok">TikTok</button>
                    <button class="modal-tab" onclick="switchModalTab('youtube')" data-i18n="youtube">YouTube</button>
                    <button class="modal-tab" onclick="switchModalTab('instagram')" data-i18n="instagram">Instagram</button>
                    <button class="modal-tab" onclick="switchModalTab('facebook')" data-i18n="facebook">Facebook</button>
                </div>
                
                <div id="tiktok" class="tab-content active">
                    <h3>TikTok Community Guidelines</h3>
                    <p>Guidelines and policies for TikTok content moderation.</p>
                    <div style="margin-top: 1rem; padding: 1rem; background: #f8f9fa; border-radius: 8px;">
                        <strong>Key Points:</strong><br>
                        • No hate speech or harassment<br>
                        • Age-appropriate content only<br>
                        • No dangerous challenges or stunts<br>
                        • Respect intellectual property rights
                    </div>
                </div>
                
                <div id="youtube" class="tab-content">
                    <h3>YouTube Community Guidelines</h3>
                    <p>YouTube's policies for content creators and viewers.</p>
                    <div style="margin-top: 1rem; padding: 1rem; background: #f8f9fa; border-radius: 8px;">
                        <strong>Key Points:</strong><br>
                        • Family-friendly content preferred<br>
                        • No violence or graphic content<br>
                        • Educational and entertaining content<br>
                        • Follow copyright regulations
                    </div>
                </div>
                
                <div id="instagram" class="tab-content">
                    <h3>Instagram Community Standards</h3>
                    <p>Instagram's standards for posts, stories, and reels.</p>
                </div>
                
                <div id="facebook" class="tab-content">
                    <h3>Facebook Community Standards</h3>
                    <p>Facebook's comprehensive community guidelines.</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Settings Modal -->
    <div id="settingsModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title" data-i18n="settings">⚙️ Settings</h2>
                <span class="close" onclick="closeModal('settingsModal')">&times;</span>
            </div>
            <div class="modal-body">
                <div class="modal-tabs">
                    <button class="modal-tab active" onclick="switchModalTab('notifications')" data-i18n="notifications">Notifications</button>
                    <button class="modal-tab" onclick="switchModalTab('scan-preferences')" data-i18n="scanPreferences">Scan Preferences</button>
                    <button class="modal-tab" onclick="switchModalTab('privacy')" data-i18n="privacy">Privacy & Security</button>
                </div>
                
                <div id="notifications" class="tab-content active">
                    <h3 data-i18n="notificationSettings">Notification Settings</h3>
                    <p data-i18n="notificationDesc">Manage your notification preferences.</p>
                    
                    <div class="setting-item">
                        <div class="setting-info">
                            <h4 data-i18n="emailNotifications">Email Notifications</h4>
                            <p data-i18n="emailNotificationsDesc">Receive updates via email</p>
                        </div>
                        <div class="toggle-switch active" onclick="toggleSetting(this)">
                            <div class="toggle-slider"></div>
                        </div>
                    </div>
                    
                    <div class="setting-item">
                        <div class="setting-info">
                            <h4 data-i18n="pushNotifications">Push Notifications</h4>
                            <p data-i18n="pushNotificationsDesc">Real-time browser notifications</p>
                        </div>
                        <div class="toggle-switch" onclick="toggleSetting(this)">
                            <div class="toggle-slider"></div>
                        </div>
                    </div>
                    
                    <div class="setting-item">
                        <div class="setting-info">
                            <h4 data-i18n="violationAlerts">Violation Alerts</h4>
                            <p data-i18n="violationAlertsDesc">Immediate alerts for content violations</p>
                        </div>
                        <div class="toggle-switch active" onclick="toggleSetting(this)">
                            <div class="toggle-slider"></div>
                        </div>
                    </div>
                </div>
                
                <div id="scan-preferences" class="tab-content">
                    <h3 data-i18n="scanPreferencesTitle">Scan Preferences</h3>
                    <p data-i18n="scanPreferencesDesc">Configure automatic scanning behavior.</p>
                    
                    <div class="setting-item">
                        <div class="setting-info">
                            <h4 data-i18n="autoScan">Auto-Scan New Content</h4>
                            <p data-i18n="autoScanDesc">Automatically scan new uploads</p>
                        </div>
                        <div class="toggle-switch active" onclick="toggleSetting(this)">
                            <div class="toggle-slider"></div>
                        </div>
                    </div>
                    
                    <div class="setting-item">
                        <div class="setting-info">
                            <h4 data-i18n="deepScan">Deep Scan Mode</h4>
                            <p data-i18n="deepScanDesc">Enhanced AI analysis for better accuracy</p>
                        </div>
                        <div class="toggle-switch" onclick="toggleSetting(this)">
                            <div class="toggle-slider"></div>
                        </div>
                    </div>
                </div>
                
                <div id="privacy" class="tab-content">
                    <h3 data-i18n="privacySecurityTitle">Privacy & Security</h3>
                    <p data-i18n="privacySecurityDesc">Manage your privacy and security settings.</p>
                    
                    <div class="setting-item">
                        <div class="setting-info">
                            <h4 data-i18n="dataRetention">Data Retention</h4>
                            <p data-i18n="dataRetentionDesc">Keep scan data for analytics</p>
                        </div>
                        <div class="toggle-switch active" onclick="toggleSetting(this)">
                            <div class="toggle-slider"></div>
                        </div>
                    </div>
                    
                    <div class="setting-item">
                        <div class="setting-info">
                            <h4 data-i18n="twoFactorAuth">Two-Factor Authentication</h4>
                            <p data-i18n="twoFactorAuthDesc">Enhanced account security</p>
                        </div>
                        <div class="toggle-switch" onclick="toggleSetting(this)">
                            <div class="toggle-slider"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Support Modal -->
    <div id="supportModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title" data-i18n="support">💬 Support</h2>
                <span class="close" onclick="closeModal('supportModal')">&times;</span>
            </div>
            <div class="modal-body">
                <div class="modal-tabs">
                    <button class="modal-tab active" onclick="switchModalTab('live-chat')" data-i18n="liveChat">Live Chat</button>
                    <button class="modal-tab" onclick="switchModalTab('email-support')" data-i18n="emailSupport">Email Support</button>
                    <button class="modal-tab" onclick="switchModalTab('faq')" data-i18n="faq">FAQ</button>
                    <button class="modal-tab" onclick="switchModalTab('documentation')" data-i18n="documentation">Documentation</button>
                </div>
                
                <div id="live-chat" class="tab-content active">
                    <h3 data-i18n="liveChatTitle">Live Chat Support</h3>
                    <p data-i18n="liveChatDesc">Get instant help from our support team.</p>
                    <div style="margin-top: 1rem;">
                        <button style="padding: 0.75rem 1.5rem; background: #667eea; color: white; border: none; border-radius: 8px; font-size: 1rem;">Start Chat Session</button>
                    </div>
                    <div style="margin-top: 1rem; padding: 1rem; background: #f8f9fa; border-radius: 8px;">
                        <strong>Average Response Time:</strong> 2 minutes<br>
                        <strong>Available:</strong> 24/7<br>
                        <strong>Languages:</strong> English, Arabic
                    </div>
                </div>
                
                <div id="email-support" class="tab-content">
                    <h3 data-i18n="emailSupportTitle">Email Support</h3>
                    <p data-i18n="emailSupportDesc">Send us detailed questions via email.</p>
                    <div style="margin-top: 1rem;">
                        <strong>Support Email:</strong> support@checkreel.com<br>
                        <strong>Response Time:</strong> Within 4 hours<br>
                        <strong>For Urgent Issues:</strong> Use live chat
                    </div>
                </div>
                
                <div id="faq" class="tab-content">
                    <h3 data-i18n="faqTitle">Frequently Asked Questions</h3>
                    <p data-i18n="faqDesc">Find answers to common questions.</p>
                    <div style="margin-top: 1rem;">
                        <strong>Popular Questions:</strong><br>
                        • How accurate is the content scanning?<br>
                        • What platforms are supported?<br>
                        • How to upgrade my subscription?<br>
                        • Can I export scan reports?
                    </div>
                </div>
                
                <div id="documentation" class="tab-content">
                    <h3 data-i18n="documentationTitle">Documentation</h3>
                    <p data-i18n="documentationDesc">Comprehensive guides and API documentation.</p>
                    <div style="margin-top: 1rem;">
                        <button style="padding: 0.5rem 1rem; background: #764ba2; color: white; border: none; border-radius: 4px; margin-right: 0.5rem;">User Guide</button>
                        <button style="padding: 0.5rem 1rem; background: #667eea; color: white; border: none; border-radius: 4px;">API Docs</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Chart.js CDN -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.0/chart.min.js"></script>
    
    <script>
        // Language translations
        const languages = {
            en: {
                todayRevenue: "Today's Revenue",
                monthlyRevenue: "Monthly Revenue", 
                arpu: "ARPU",
                churnRate: "Churn Rate",
                revenueAnalytics: "Revenue Analytics",
                overview: "Overview",
                trends: "Trends",
                forecast: "Forecast",
                userTiers: "User Tiers",
                freeTier: "Free Tier",
                plusTier: "Plus Tier", 
                premiumTier: "Premium Tier",
                aiActions: "AI-Powered Actions",
                revenueOptimization: "Revenue Optimization",
                churnPrevention: "Churn Prevention",
                upgradeOpportunities: "Upgrade Opportunities",
                usageAnalytics: "6-Month Revenue Forecast",
                quickActions: "Quick Actions",
                scanHistory: "Scan History",
                platformGuidelines: "Platform Guidelines",
                settings: "Settings",
                support: "Support",
                recentActivity: "Recent Activity",
                recentScans: "Recent Scans",
                analytics: "Analytics",
                export: "Export",
                recentScansTitle: "Recent Content Scans",
                recentScansDesc: "View and manage recent content scans across all platforms.",
                scanAnalyticsTitle: "Scan Analytics", 
                scanAnalyticsDesc: "Detailed analytics and insights from content scanning.",
                exportDataTitle: "Export Data",
                exportDataDesc: "Export scan history and analytics data.",
                tiktok: "TikTok",
                youtube: "YouTube",
                instagram: "Instagram", 
                facebook: "Facebook",
                notifications: "Notifications",
                scanPreferences: "Scan Preferences",
                privacy: "Privacy & Security",
                notificationSettings: "Notification Settings",
                notificationDesc: "Manage your notification preferences.",
                emailNotifications: "Email Notifications",
                emailNotificationsDesc: "Receive updates via email",
                pushNotifications: "Push Notifications",
                pushNotificationsDesc: "Real-time browser notifications",
                violationAlerts: "Violation Alerts",
                violationAlertsDesc: "Immediate alerts for content violations",
                scanPreferencesTitle: "Scan Preferences",
                scanPreferencesDesc: "Configure automatic scanning behavior.",
                autoScan: "Auto-Scan New Content",
                autoScanDesc: "Automatically scan new uploads",
                deepScan: "Deep Scan Mode", 
                deepScanDesc: "Enhanced AI analysis for better accuracy",
                privacySecurityTitle: "Privacy & Security",
                privacySecurityDesc: "Manage your privacy and security settings.",
                dataRetention: "Data Retention",
                dataRetentionDesc: "Keep scan data for analytics",
                twoFactorAuth: "Two-Factor Authentication",
                twoFactorAuthDesc: "Enhanced account security",
                liveChat: "Live Chat",
                emailSupport: "Email Support",
                faq: "FAQ", 
                documentation: "Documentation",
                liveChatTitle: "Live Chat Support",
                liveChatDesc: "Get instant help from our support team.",
                emailSupportTitle: "Email Support",
                emailSupportDesc: "Send us detailed questions via email.",
                faqTitle: "Frequently Asked Questions",
                faqDesc: "Find answers to common questions.",
                documentationTitle: "Documentation",
                documentationDesc: "Comprehensive guides and API documentation."
            },
            ar: {
                todayRevenue: "إيرادات اليوم",
                monthlyRevenue: "الإيرادات الشهرية",
                arpu: "متوسط الإيراد لكل مستخدم", 
                churnRate: "معدل التسرب",
                revenueAnalytics: "تحليلات الإيرادات",
                overview: "نظرة عامة",
                trends: "الاتجاهات",
                forecast: "التوقعات",
                userTiers: "مستويات المستخدمين",
                freeTier: "المستوى المجاني",
                plusTier: "مستوى بلس",
                premiumTier: "المستوى المميز",
                aiActions: "إجراءات مدعومة بالذكاء الاصطناعي",
                revenueOptimization: "تحسين الإيرادات",
                churnPrevention: "منع التسرب",
                upgradeOpportunities: "فرص الترقية",
                usageAnalytics: "توقعات الإيرادات لستة أشهر",
                quickActions: "إجراءات سريعة",
                scanHistory: "تاريخ المسح",
                platformGuidelines: "إرشادات المنصات",
                settings: "الإعدادات",
                support: "الدعم",
                recentActivity: "النشاط الأخير",
                recentScans: "المسح الأخير",
                analytics: "التحليلات",
                export: "تصدير",
                recentScansTitle: "مسح المحتوى الأخير",
                recentScansDesc: "عرض وإدارة عمليات المسح الأخيرة عبر جميع المنصات.",
                scanAnalyticsTitle: "تحليلات المسح",
                scanAnalyticsDesc: "تحليلات مفصلة ورؤى من مسح المحتوى.",
                exportDataTitle: "تصدير البيانات",
                exportDataDesc: "تصدير تاريخ المسح وبيانات التحليلات.",
                tiktok: "تيك توك",
                youtube: "يوتيوب", 
                instagram: "إنستغرام",
                facebook: "فيسبوك",
                notifications: "الإشعارات",
                scanPreferences: "تفضيلات المسح",
                privacy: "الخصوصية والأمان",
                notificationSettings: "إعدادات الإشعارات",
                notificationDesc: "إدارة تفضيلات الإشعارات الخاصة بك.",
                emailNotifications: "إشعارات البريد الإلكتروني",
                emailNotificationsDesc: "تلقي التحديثات عبر البريد الإلكتروني",
                pushNotifications: "الإشعارات الفورية",
                pushNotificationsDesc: "إشعارات المتصفح في الوقت الفعلي",
                violationAlerts: "تنبيهات الانتهاكات",
                violationAlertsDesc: "تنبيهات فورية لانتهاكات المحتوى",
                scanPreferencesTitle: "تفضيلات المسح",
                scanPreferencesDesc: "تكوين سلوك المسح التلقائي.",
                autoScan: "المسح التلقائي للمحتوى الجديد",
                autoScanDesc: "مسح التحميلات الجديدة تلقائياً",
                deepScan: "وضع المسح العميق",
                deepScanDesc: "تحليل معزز بالذكاء الاصطناعي لدقة أفضل",
                privacySecurityTitle: "الخصوصية والأمان",
                privacySecurityDesc: "إدارة إعدادات الخصوصية والأمان الخاصة بك.",
                dataRetention: "الاحتفاظ بالبيانات",
                dataRetentionDesc: "الاحتفاظببيانات المسح للتحليلات",
                twoFactorAuth: "المصادقة الثنائية",
                twoFactorAuthDesc: "أمان معزز للحساب",
                liveChat: "الدردشة المباشرة",
                emailSupport: "دعم البريد الإلكتروني",
                faq: "الأسئلة الشائعة",
                documentation: "التوثيق",
                liveChatTitle: "دعم الدردشة المباشرة",
                liveChatDesc: "احصل على مساعدة فورية من فريق الدعم لدينا.",
                emailSupportTitle: "دعم البريد الإلكتروني",
                emailSupportDesc: "أرسل لنا أسئلة مفصلة عبر البريد الإلكتروني.",
                faqTitle: "الأسئلة الشائعة",
                faqDesc: "اعثر على إجابات للأسئلة الشائعة.",
                documentationTitle: "التوثيق",
                documentationDesc: "أدلة شاملة ووثائق API."
            }
        };

        // Global variables
        let currentLanguage = 'en';
        let chartInstance = null;

        // Initialize app
        document.addEventListener('DOMContentLoaded', function() {
            // Load saved language
            const savedLanguage = localStorage.getItem('checkReelLanguage') || 'en';
            updateLanguage(savedLanguage);
            
            // Initialize chart
            initializeChart();
            
            // Initialize PWA
            initializePWA();
            
            // Set up language selector
            document.getElementById('languageSelector').addEventListener('change', function(e) {
                updateLanguage(e.target.value);
            });
        });

        // Language management
        function updateLanguage(lang) {
            currentLanguage = lang;
            document.getElementById('languageSelector').value = lang;
            
            // Update HTML direction for RTL
            if (lang === 'ar') {
                document.documentElement.setAttribute('dir', 'rtl');
            } else {
                document.documentElement.setAttribute('dir', 'ltr');
            }
            
            // Update all translatable elements
            const elements = document.querySelectorAll('[data-i18n]');
            elements.forEach(element => {
                const key = element.getAttribute('data-i18n');
                if (languages[lang] && languages[lang][key]) {
                    element.textContent = languages[lang][key];
                }
            });
            
            // Save language preference
            localStorage.setItem('checkReelLanguage', lang);
        }

        // Modal management
        function openModal(modalId) {
            const modal = document.getElementById(modalId);
            if (modal) {
                modal.style.display = 'block';
                document.body.style.overflow = 'hidden';
            }
        }

        function closeModal(modalId) {
            const modal = document.getElementById(modalId);
            if (modal) {
                modal.style.display = 'none';
                document.body.style.overflow = 'auto';
            }
        }

        // Tab management
        function switchTab(tabName) {
            // Update tab buttons
            const tabButtons = document.querySelectorAll('.tab-button');
            tabButtons.forEach(button => {
                button.classList.remove('active');
            });
            event.target.classList.add('active');
        }

        function switchModalTab(tabName) {
            // Hide all tab contents
            const tabContents = document.querySelectorAll('.tab-content');
            tabContents.forEach(content => {
                content.classList.remove('active');
            });
            
            // Show selected tab content
            const selectedTab = document.getElementById(tabName);
            if (selectedTab) {
                selectedTab.classList.add('active');
            }
            
            // Update tab buttons
            const tabButtons = document.querySelectorAll('.modal-tab');
            tabButtons.forEach(button => {
                button.classList.remove('active');
            });
            event.target.classList.add('active');
        }

        // Settings toggle
        function toggleSetting(element) {
            element.classList.toggle('active');
        }

        // Chart initialization (fixed - no retry loops)
        function initializeChart() {
            const ctx = document.getElementById('revenueChart');
            if (!ctx) return;

            // Destroy existing chart if it exists
            if (chartInstance) {
                chartInstance.destroy();
            }

            // Create new chart
            try {
                chartInstance = new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
                        datasets: [{
                            label: 'Revenue ($)',
                            data: [18500, 21200, 19800, 23400, 24567, 26800],
                            borderColor: 'rgba(255, 255, 255, 0.8)',
                            backgroundColor: 'rgba(255, 255, 255, 0.1)',
                            borderWidth: 3,
                            fill: true,
                            tension: 0.4,
                            pointBackgroundColor: 'white',
                            pointBorderColor: 'rgba(255, 255, 255, 0.8)',
                            pointBorderWidth: 2,
                            pointRadius: 6
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                display: false
                            }
                        },
                        scales: {
                            x: {
                                ticks: {
                                    color: 'rgba(255, 255, 255, 0.8)'
                                },
                                grid: {
                                    color: 'rgba(255, 255, 255, 0.1)'
                                }
                            },
                            y: {
                                ticks: {
                                    color: 'rgba(255, 255, 255, 0.8)',
                                    callback: function(value) {
                                        return ' + value.toLocaleString();
                                    }
                                },
                                grid: {
                                    color: 'rgba(255, 255, 255, 0.1)'
                                }
                            }
                        }
                    }
                });
            } catch (error) {
                console.log('Chart initialization deferred until Chart.js loads');
            }
        }

        // PWA functionality
        let deferredPrompt;

        function initializePWA() {
            // Check if app is already installed
            if (window.matchMedia('(display-mode: standalone)').matches) {
                document.getElementById('pwaStatus').textContent = '📱 App Installed';
            } else {
                document.getElementById('pwaStatus').textContent = '🌐 Web Version';
            }

            // Listen for install prompt
            window.addEventListener('beforeinstallprompt', (e) => {
                e.preventDefault();
                deferredPrompt = e;
                const installBtn = document.getElementById('installPWA');
                if (installBtn) {
                    installBtn.style.display = 'block';
                }
            });

            // Install button handler
            const installBtn = document.getElementById('installPWA');
            if (installBtn) {
                installBtn.addEventListener('click', async () => {
                    if (deferredPrompt) {
                        deferredPrompt.prompt();
                        const { outcome } = await deferredPrompt.userChoice;
                        if (outcome === 'accepted') {
                            installBtn.style.display = 'none';
                            document.getElementById('pwaStatus').textContent = '📱 App Installing...';
                        }
                        deferredPrompt = null;
                    }
                });
            }

            // Register service worker
            if ('serviceWorker' in navigator) {
                navigator.serviceWorker.register('/sw.js').catch(() => {
                    // Silent fail for demo purposes
                });
            }
        }

        // Missing functions that were causing errors
        function getLocalizedMessage(key) {
            const lang = currentLanguage || 'en';
            return languages[lang] && languages[lang][key] ? languages[lang][key] : key;
        }

        function showInstallBanner() {
            // Show install banner if supported
            if (deferredPrompt) {
                const installBtn = document.getElementById('installPWA');
                if (installBtn) {
                    installBtn.style.display = 'block';
                }
            }
        }

        function forceAppInstall() {
            // Force app installation
            if (deferredPrompt) {
                deferredPrompt.prompt();
            } else {
                // Fallback for browsers that don't support beforeinstallprompt
                alert('To install this app, use your browser\'s "Add to Home Screen" option.');
            }
        }

        // Close modals when clicking outside
        window.addEventListener('click', function(event) {
            if (event.target.classList.contains('modal')) {
                event.target.style.display = 'none';
                document.body.style.overflow = 'auto';
            }
        });

        // Retry chart initialization if Chart.js loads later
        window.addEventListener('load', function() {
            if (typeof Chart !== 'undefined' && !chartInstance) {
                setTimeout(initializeChart, 100);
            }
        });
    </script>
</body>
</html>